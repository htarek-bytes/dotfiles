# =============================================================================
#  MACBOOK PRO 2017 - FINAL CONFIG
# =============================================================================

# --- 1. DISPLAY ---
monitor=eDP-1,preferred,auto,1.33333

# --- BLUR RULES FOR SWAYNC ---
layerrule = blur, swaync-control-center
layerrule = blur, swaync-notification-window
layerrule = ignorezero, swaync-control-center
layerrule = ignorezero, swaync-notification-window
layerrule = ignorealpha 0.5, swaync-control-center
layerrule = blur, waybar
layerrule = ignorezero, waybar

# --- TRACKPAD DEVICE CONFIG (Required for moff/mon) ---
device {
    name = apple-spi-touchpad
    enabled = true
}
# --- 2. INPUT & KEYBOARD ---
input {
    kb_layout = us,ca
    # Command+Space to switch language | Caps Lock acts as Control
    kb_options = grp:win_space_toggle,ctrl:nocaps

    follow_mouse = 1

    touchpad {
        natural_scroll = yes
        scroll_factor = 0.4
        clickfinger_behavior = true
        tap-to-click = true
    }
}
# Alt + Tab -> Open Window Switcher (Rofi)
bind = ALT, Tab, exec, rofi -show window
gestures {
    workspace_swipe = on
    workspace_swipe_fingers = 3
}

# --- 3. STARTUP ---
exec-once = systemctl --user start wireplumber pipewire pipewire-pulse
exec-once = waybar &
exec-once = swaybg -c "#000000" &
exec-once = nm-applet &
exec-once = swaync &

# --- 4. KEYBINDINGS ---
$mainMod = SUPER # COMMAND Key

# --- A. SYSTEM SHORTCUTS ---

# Command + Comma -> Settings (GNOME Control Center)
bind = SUPER, comma, exec, gnome-control-center

# Command + S -> Side Panel (Notifications/Wifi/Volume)
bind = SUPER, S, exec, ~/.config/hypr/sysmenu.sh
# Command (Tap) -> App Launcher
bindr = SUPER, SUPER_L, exec, pkill rofi || rofi -show drun

# Command + Enter -> Terminal
bind = SUPER, Return, exec, ptyxis
# Command + E -> Files
bind = CTRL, E, exec, nautilus

# --- WINDOW MANAGEMENT (THE ROCK SOLID SETUP) ---

# 1. Focus Movement (Command + Arrows)
# Move your "eyes" between windows
bind = SUPER, Left, movefocus, l
bind = SUPER, Right, movefocus, r
bind = SUPER, Up, movefocus, u
bind = SUPER, Down, movefocus, d

# 2. Move Windows (Command + Shift + Arrows)
# Physically swap/move the window on the screen
bind = SUPER SHIFT, Left, movewindow, l
bind = SUPER SHIFT, Right, movewindow, r
bind = SUPER SHIFT, Up, movewindow, u
bind = SUPER SHIFT, Down, movewindow, d

# --- WINDOW HIDING & WALLPAPERS ---

# Command + H -> Hide Window One by One (like macOS)
bind = SUPER, H, exec, ~/.config/hypr/hide_window.sh

# Command + Shift + H -> Show All Hidden Windows
bind = SUPER SHIFT, H, togglespecialworkspace, hidden

# Command + W -> Cycle Through Blue Wallpapers
bind = SUPER, W, exec, ~/.config/hypr/cycle_wallpaper.sh
# 3. Fullscreen (Command + F)
# Toggles the window to fill the screen (Press again to exit)
bind = SUPER, F, fullscreen

# --- RESTORED EXTRAS ---

# Volume Limit (Max 180%)
# Uses the script we made earlier to prevent blowing speakers

# --- SWITCHING APPS (INSTANT - NO GUI) ---

# Alt + Tab -> Jump to next window immediately
bind = ALT, Tab, cyclenext,
bind = ALT, Tab, bringactivetotop,

# Command + Tab -> Same thing (if you want redundancy)
bind = SUPER, Tab, cyclenext,
bind = SUPER, Tab, bringactivetotop,


# --- C. SCREENSHOTS ---# 

# Command + P -> Active Tile Screenshot (Uses your script)
bind = SUPER, P, exec, ~/.config/hypr/screenshot_active.sh

# Command + Shift + P -> Full Screen: Save to File AND Copy to Clipboard
# "tee" splits the image: one copy to the file, one copy to wl-copy
bind = SUPER SHIFT, P, exec, ~/.config/hypr/screenshot_full.sh

# Print Screen -> Select Area
bind = , Print, exec, grim -g "$(slurp)" - | wl-copy

# --- D. WORKSPACE NAVIGATION (OPTION + ARROWS) ---
bind = ALT, Left, workspace, m-1
bind = ALT, Right, workspace, m+1
bind = ALT, 1, workspace, 1
bind = ALT, 2, workspace, 2
bind = ALT, 3, workspace, 3
bind = ALT, 4, workspace, 4

# --- E. MOVING WINDOWS (OPTION + SHIFT) ---
bind = SHIFT ALT, 1, movetoworkspace, 1
bind = SHIFT ALT, 2, movetoworkspace, 2
bind = SHIFT ALT, 3, movetoworkspace, 3
bind = SHIFT ALT, 4, movetoworkspace, 4
bind = SHIFT ALT, Left, movetoworkspace, m-1
bind = SHIFT ALT, Right, movetoworkspace, m+1

# --- HARDWARE KEYS ---
# Screen Brightness (F1 / F2)
bindel = , XF86MonBrightnessUp, exec, brightnessctl set +10%
bindel = , XF86MonBrightnessDown, exec, brightnessctl set 10%-

# Keyboard Backlight (F5 / F6)
bindel = , XF86KbdBrightnessUp, exec, brightnessctl -d *::kbd_backlight set +33%
bindel = , XF86KbdBrightnessDown, exec, brightnessctl -d *::kbd_backlight set 33%-

# Volume (F10 / F11 / F12)
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.8 @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# --- 5. VISUALS ---
general {
    gaps_in = 4
    gaps_out = 8
    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)
    layout = dwindle
}

decoration {
    rounding = 8
    blur {
        enabled = false
    }
}

animations {
    enabled = yes
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 5, myBezier
    animation = windowsOut, 1, 5, default, popin 80%
    animation = workspaces, 1, 4, default
}


# Hide cursor
bind = SUPER_SHIFT, C, exec, hyprctl keyword cursor:inactive_timeout 1

# Show cursor
bind = SUPER_CTRL, C, exec, hyprctl keyword cursor:inactive_timeout 0

input {
kb_layout=us,ua
kb_options=grp:win_space_toggle
}
